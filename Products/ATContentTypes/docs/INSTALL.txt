==============================================
Quick switching instructions for the impatient
==============================================

 * Back up your data! Seriously! This thing may break your content, it is still
   experimental. But we need your feedback to make the migration perfect, so
   please install and convert your site on a backup instance, and report any
   failures/errors to us, so we can fix them.

 * Update or install all required software like Archetypes,
   ATReferenceBrowserWidget and ATContentTypes

 * Restart Zope

 * Install ATContentTypes using the quickinstaller_tool. It should install all
   required products, too. It may take a while to install ATContentTypes because
   the installer has to recatalog all CMF based types first in order to make
   sure the migration doesn't break. Don't panik, reinstalls will be super fast
   because the installer is able to distinguish between install, uninstall and
   reinstall.

 * Go to the ZMI (Zope management interface) and browse to the portal_atct tool.
   Click on the migration tab and run the migration in order to migrate the old
   CMF types to the new ATContentTypes types.

 * Don't forget to report any migration failures in the ATCT bug tracker on SF:
   http://sourceforge.net/tracker/?atid=645337&group_id=55262&func=browse - we
   need your bug report to make migration as smooth as possible!

============
Requirements
============

Zope 2.8 or 2.9
---------------

AT Content Types requires, Zope 2.8.7 or Zope 2.9.3.

Python 2.3.5+
-------------

AT Content Types requires some new features of Python 2.3.5+. Python 2.4+ is
only supported and required in conjunction with Zope 2.9.

Archetypes 1.3.7+ or 1.4.0+
---------------------------

AT Content Types is tested with the following AT versions

 * AT 1.3.7 or newer releases of AT 1.3

 * AT 1.4.0 or newer releases of AT 1.4

CMFQuickinstaller
-----------------

You have to install CMFQuickinstaller 1.5.4+ of the quickinstaller tool.

Plone 2.1
---------

AT Content Types requires the templates and icon of CMFPlone for viewing the
types and AT Folder requires some code from PloneFolder, too. It should be easy
to seperate the dependecies if needed.

ATContentTypes 1.1 is designed for Plone 2.5, whereas 1.0 is designed for
Plone 2.1.

ATReferenceBrowserWidget 1.4
-----------------------------

ATReferenceWidget 1.4 or higher is required for the related items field.

CMF 1.5.5+
----------

Plone 2.1 and ATContentTypes 1.0 require CMF 1.5.5 or newer.
Plone 2.5 and ATContentTypes 1.1 require CMF 1.6.0 or newer.

CMFDynamicViewFTI 1.0.2
-----------------------

A special new FTI for dynamic views. It is the successor of TemplateMixin.

=====================
Optional Requirements
=====================

mxTidy
------

Install egenix mxTidy to enable the validation of the body text of ATDocument.
The text is checked and is rejected if it contains wrong xhtml syntax that may
break the user interface of plone.
You can download mxTidy from http://www.egenix.com/files/python/mxTidy.htm

TextIndexNG 2.0.8+
------------------

If you want to use TextIndexNG to index the SearchableText attribute you should
install version 2.0.7 or higher. Only newer versions uses the special hook that
allows indexing the containment of ATFile.
You can download TextIndexNG from http://zope.org/Members/ajung/TextIndexNG/

PortalTransforms helper applications
------------------------------------

You should install all helpers application for PortalTransforms.
For debian users:
apt-get install lynx pdftohtml wv xsltproc tidy \
                unrtf ppthtml xlhtml gs-common xpdf-utils catdoc

Python Imaging Library (PIL) 1.1.5+
-----------------------------------

In order to enable the auto resizing feature of ATImage (Archetypes ImageField)
you have to install PIL also known as python-imaging or Python Imaging Library.
It's available under http://www.pythonware.com/products/pil/


============
Installation
============

Use the QuickInstaller to install AT Content Types. You should install
Archetypes and PortalTransform before installing AT Content Types.


=======================
Reconfiguration of Zope
=======================

You need to reconfigure Zope to make it play nice with Plone and AT Content
Types.

At first you need to set reST header level to 2. For Zope 2.8 change the
etc/zope.conf and adjust the environment section in the config file:

<environment>
    STX_DEFAULT_LEVEL 2
</environment>

For Zope 2.7 you also must set the rest-input-encoding and rest-out-encoding
to the same encoding you are using as site-encoding for Plone. I suggest using
utf-8 everywhere.

=======================
Migration from ATCT 0.2
=======================

 * Make sure you have switched to ATCT and ATCT types are the default types!

 * Don't uninstall ATCT, instead stop Zope and install the updates for
   Archetypes, QuickInstaller and ATContentTypes.

 * Start Zope in debug mode to check that all products are installed correctly.

 * Reinstall ATContentTypes using the quickinstaller tool. Do *NOT* uninstall
   and install it!

========================
Migration from CMF types
========================

** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP **

             YOU MUST (!) BACKUP YOUR ZODB BEFORE MIGRATING!

** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP **

Migration may fail and it could destroy your data. So please backup your ZODB
before migrating to AT Content Types.

 * Install ATContentTypes as usually using the quickinstaller

 * browse to the portal_atct tool and run the type migration

