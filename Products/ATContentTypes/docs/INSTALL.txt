==============================================
Quick switching instructions for the impatient
==============================================

 * Back up your data! Seriously! This thing may break your content, it is still
   experimental. But we need your feedback to make the migration perfect, so
   please install and convert your site on a backup instance, and report any
   failures/errors to us, so we can fix them.
   
 * Update or install all required software like Archetypes,
   ATReferenceBrowserWidget and ATContentTypes

 * Restart Zope

 * Install ATContentTypes using the quickinstaller_tool. It should install all
   required products, too. It may take a while to install ATContentTypes because
   the installer has to recatalog all CMF based types first in order to make
   sure the migration doesn't break. Don't panik, reinstalls will be super fast
   because the installer is able to distinguish between install, uninstall and
   reinstall.

 * Go to the ZMI (Zope management interface) and browse to the portal_atct tool.
   Click on the migration tab and run the migration in order to migrate the old
   CMF types to the new ATContentTypes types.
     
 * Don't forget to report any migration failures in the ATCT bug tracker on SF:
   http://sourceforge.net/tracker/?atid=645337&group_id=55262&func=browse - we
   need your bug report to make migration as smooth as possible!
    
       
============
Requirements
============

Zope 2.7.4+
-----------------------

AT Content Types requires Zope 2.7.4.

Python 2.3.4+
----------------------

AT Content Types requires some new features of Python 2.3.3+.


Archetypes 1.3.2
----------------

AT Content Types is tested with the following AT versions

 * AT 1.3.2 (currently unreleased) or newer releases of AT 1.3

 * AT SVN anon bundle after 2005-02-12
   http://svn.plone.org/archetypes/bundles/anon-archetypes-1.3/

AT Content Types doesn't work with other versions of Archetypes because some
fixes are missing. Right now it's tested only with the newest cvs version of
Archetypes.

AT Content Types doesn't work with AT 1.2.x or older!

CMFQuickinstaller
-----------------

You have to install CMFQuickinstaller 1.5.2+ of the quickinstaller tool.

Plone
-----

AT Content Types requires the templates and icon of CMFPlone for viewing the
types and AT Folder requires some code from PloneFolder, too. It should be easy
to seperate the dependecies if needed.

ATContentTypes 1.0 is designed for the upcoming version 2.1 of Plone. Most parts
of ATContentTypes will work with Plone 2.0.5 but there are at least 4 known bugs
or missing features in Plone 2.0.5. Read ERRATA.txt for more informations. Maybe
the plone community will release Plone 2.0.6 which will contain some bug fixes
and backports from 2.1.

ATReferenceBrowserWidget
------------------------

ATReferenceWidget from http://svn.plone.org/archetypes/MoreFieldsAndWidgets/
is required for the related items field. There is no official release yet. You
to get it from svn:

  svn co http://svn.plone.org/archetypes/MoreFieldsAndWidgets/ATReferenceBrowserWidget/trunk/ ATReferenceBrowserWidget

=====================
Optional Requirements
=====================

mxTidy
------

Install egenix mxTidy to enable the validation of the body text of ATDocument.
The text is checked and is rejected if it contains wrong xhtml syntax that may
break the user interface of plone. 
You can download mxTidy from http://www.egenix.com/files/python/mxTidy.htm

TextIndexNG 2.0.8+
------------------

If you want to use TextIndexNG to index the SearchableText attribute you should
install version 2.0.7 or higher. Only newer versions uses the special hook that
allows indexing the containment of ATFile.
You can download TextIndexNG from http://zope.org/Members/ajung/TextIndexNG/

PortalTransforms helper applications
------------------------------------

You should install all helpers application for PortalTransforms.
For debian users:
apt-get install lynx pdftohtml wv xsltproc tidy \
                unrtf ppthtml xlhtml gs-common xpdf-utils catdoc

Python Imaging Library (PIL)
----------------------------

In order to enable the auto resizing feature of ATImage (Archetypes ImageField)
you have to install PIL also known as python-imaging or Python Imaging Library.
It's available under http://www.pythonware.com/products/pil/

ExternalStorage
---------------

For the moment ExternalStorage is not supported offically!

============
Installation
============

Use the QuickInstaller to install AT Content Types. You should install
Archetypes and PortalTransform before installing AT Content Types.


=======================
Reconfiguration of Zope
=======================

You need to reconfigure Zope to make it play nice with Plone and AT Content
Types.

At first you need to set reST header level to 2. For Zope 2.7 change the 
etc/zope.conf and adjust the environment section in the config file:

<environment>
    STX_DEFAULT_LEVEL 2
</environment>

For Zope 2.6 define a environment var. For a un*x bash script:

export STX_DEFAULT_LEVEL=2

For Windows:
@set STXT_DEFAULT_LEVEL=2

For Zope 2.7 you also must set the rest-input-encoding and rest-out-encoding
to the same encoding you are using as site-encoding for Plone. I suggest using
utf-8 everywhere.

=======================
Migration from ATCT 0.2
=======================

 * Make sure you have switched to ATCT and ATCT types are the default types!

 * Don't uninstall ATCT, instead stop Zope and install the updates for
   Archetypes, QuickInstaller and ATContentTypes.

 * Start Zope in debug mode to check that all products are installed correctly.

 * Reinstall ATContentTypes using the quickinstaller tool. Do *NOT* uninstall
   and install it!

========================
Migration from CMF types
========================

** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP **

             YOU MUST (!) BACKUP YOUR ZODB BEFORE MIGRATING!

** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP ** ** BACKUP **

Migration may fail and it could destroy your data. So please backup your ZODB
before migrating to AT Content Types.

Go to the external method 'migrateFromCMFtoATCT' in the ZMI of your portal root.
Run it using the 'test' tab.


==============================
Migration from CMF Plone Types
==============================

Migration from CMF Plone Types is no longer supported. There are some outdated
migration scripts available in CVS.
